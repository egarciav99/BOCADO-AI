# ğŸ—ï¸ Arquitectura

## Stack TecnolÃ³gico

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      CLIENTE                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   React 19  â”‚  â”‚   Vite      â”‚  â”‚  Tailwind CSS       â”‚ â”‚
â”‚  â”‚  TypeScript â”‚  â”‚  (Build)    â”‚  â”‚  (Estilos)          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                            â”‚
â”‚  Estado: Zustand  |  Query: TanStack Query  |  Forms: RHF â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼ HTTP / REST
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      BACKEND                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Vercel Edge Functions (Node.js)                    â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ /api/generate-recipe        â†’ Gemini API       â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ /api/recommend-restaurants â†’ Google Places     â”‚   â”‚
â”‚  â”‚  â””â”€â”€ /api/sync-data              â†’ Firestore        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SERVICIOS EXTERNOS                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚   Firebase   â”‚  â”‚Google Gemini â”‚  â”‚Google Places â”‚      â”‚
â”‚  â”‚  Auth + DB   â”‚  â”‚   (IA)       â”‚  â”‚  (Maps API)  â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Estructura de Carpetas

```
src/
â”œâ”€â”€ components/           # Componentes React
â”‚   â”œâ”€â”€ form-steps/      # Pasos del onboarding
â”‚   â”œâ”€â”€ icons/           # Iconos custom
â”‚   â””â”€â”€ pantry/          # Componentes de despensa
â”œâ”€â”€ hooks/               # Custom hooks
â”œâ”€â”€ lib/                 # Utilidades y configuraciones
â”œâ”€â”€ store/               # Zustand stores
â”œâ”€â”€ types/               # TypeScript types
â””â”€â”€ services/            # Llamadas a APIs
```

## Flujo de Datos

```
1. Usuario interactÃºa â†’ Componente React
2. AcciÃ³n â†’ Zustand Store (estado local)
3. Datos persistentes â†’ TanStack Query â†’ Firebase
4. IA/External â†’ Vercel Function â†’ Servicio externo
```

## Seguridad

- **Auth**: Firebase Authentication (Email/Google)
- **Reglas Firestore**: Reglas por usuario (`request.auth.uid == userId`)
- **API Keys**: Variables de entorno en Vercel
- **CORS**: Configurado en Vercel Functions

## Performance Targets

| MÃ©trica                | Objetivo |
| ---------------------- | -------- |
| First Contentful Paint | < 1.5s   |
| Time to Interactive    | < 3s     |
| Lighthouse Score       | > 90     |
| Bundle size inicial    | < 200KB  |

## Monitoreo

- Vercel Analytics (Web Vitals)
- Firebase Analytics (eventos de usuario)
- Console.error â†’ Logging bÃ¡sico

---

## Decisiones TÃ©cnicas Clave

| DecisiÃ³n         | Alternativa        | RazÃ³n                         |
| ---------------- | ------------------ | ----------------------------- |
| Vercel Functions | Firebase Functions | Edge network, menor latencia  |
| Zustand          | Redux              | MÃ¡s simple, menos boilerplate |
| TanStack Query   | SWR                | Mejor integraciÃ³n React 19    |
| Gemini Flash     | GPT-4              | MÃ¡s rÃ¡pido, costo eficiente   |
